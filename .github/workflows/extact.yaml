name: Extract name Reddisekhar 
on:
  workflow_dispatch:
    inputs:
      namespace:
        description: 'Enter namespace'
        required: true
        default: 'namespace1'
        type: choice
        options:
        - 'namespace1'
        - 'namespace2'
        - 'namespace3'
        - 'abc-def-efg-hij'
        - 'jkl-mno-pqr'
        - 'jkl-mno-pqr-test'
        - None
env:
  PARAMETER_WF: ${{ github.event.inputs.namespace }}      
  #GKE_NAMESPACE: ${{ github.event.inputs.namespace }}      
  #PARAMETER_WF: ${{ github.event.inputs.namespace }}      
  #PARAMETER_WF="abc-def-efg-hij"  

jobs:
  extract_age:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Extract Age
      run: |
        
        if jq -e ".[] | select(has(\"$PARAMETER_WF\"))" data-new.json > /dev/null; then
          name=$(jq ".[] | select(has(\"$PARAMETER_WF\")) | .[\"$PARAMETER_WF\"].name" data-new.json)
          echo "Name of PARAMETER_WF is $name"
        else
          echo "PARAMETER_WF object not found in the JSON file."
        fi

        #if '.[] | select(has("abc-def-ghi")) | .["abc-def-ghi"].age' data-new.json > /dev/null; then
        #  AGE=$(jq '.[] | select(.person1) | .person1.age' data.json)
        #  NAME=$(jq '.[] | select(.person1) | .person1.name' data.json)
        #  CITY=$(jq '.[] | select(.person1) | .person1.city' data.json)
        # 
        # echo "Age of person1 is $AGE"
        # echo "Name of person1 is $NAME"
        # echo "Age of person1 is $CITY"
        #else
        #  echo "person1 object not found in the JSON file."
        #fi
